<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Debug Test</title>
    <style>
      body {
        background: #0a192f;
        color: #e0e0e0;
        font-family: Arial, sans-serif;
        padding: 20px;
      }
      .debug-section {
        background: rgba(10, 25, 47, 0.8);
        padding: 20px;
        margin: 20px 0;
        border-radius: 10px;
        border: 1px solid rgba(100, 255, 218, 0.2);
      }
      .debug-title {
        color: #64ffda;
        font-size: 1.5em;
        margin-bottom: 10px;
      }
      .debug-content {
        background: rgba(0, 0, 0, 0.3);
        padding: 15px;
        border-radius: 5px;
        font-family: monospace;
        white-space: pre-wrap;
        overflow-x: auto;
      }
      button {
        background: #64ffda;
        color: #0a192f;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        margin: 5px;
      }
      button:hover {
        background: #4db3a3;
      }
    </style>
  </head>
  <body>
    <h1>User Data Debug Test</h1>

    <div class="debug-section">
      <div class="debug-title">Current localStorage Data:</div>
      <div class="debug-content" id="localStorageData">Loading...</div>
      <button onclick="refreshData()">Refresh Data</button>
      <button onclick="clearData()">Clear Data</button>
    </div>

    <div class="debug-section">
      <div class="debug-title">JSON Users Data:</div>
      <div class="debug-content" id="jsonData">Loading...</div>
      <button onclick="loadJSONData()">Load JSON Data</button>
    </div>

    <div class="debug-section">
      <div class="debug-title">Test Login:</div>
      <button onclick="testLogin('mdkhaledaminshawon@gmail.com', 'K2102003A')">
        Login as John
      </button>
      <button onclick="testLogin('jane@example.com', 'password123')">
        Login as Jane
      </button>
      <button onclick="testLogin('admin@cseclub.com', 'admin123')">
        Login as Admin
      </button>
    </div>

    <script>
      let usersData = [];

      // Load users data
      async function loadJSONData() {
        try {
          const response = await fetch("data/users.json");
          const data = await response.json();
          usersData = data.users;
          document.getElementById("jsonData").textContent = JSON.stringify(
            data,
            null,
            2
          );
          console.log("JSON data loaded:", data);
        } catch (error) {
          document.getElementById("jsonData").textContent =
            "Error loading JSON: " + error.message;
        }
      }

      // Test login function
      function testLogin(email, password) {
        const user = usersData.find(
          (u) => u.email === email && u.password === password
        );
        if (user) {
          const { password, ...userInfo } = user;
          localStorage.setItem("isLoggedIn", "true");
          localStorage.setItem("userInfo", JSON.stringify(userInfo));
          console.log("Logged in user:", userInfo);
          refreshData();
          alert("Login successful! Check localStorage data.");
        } else {
          alert("Login failed! User not found.");
        }
      }

      // Refresh localStorage data
      function refreshData() {
        const isLoggedIn = localStorage.getItem("isLoggedIn");
        const userInfo = localStorage.getItem("userInfo");

        const data = {
          isLoggedIn: isLoggedIn,
          userInfo: userInfo ? JSON.parse(userInfo) : null,
        };

        document.getElementById("localStorageData").textContent =
          JSON.stringify(data, null, 2);
      }

      // Clear all data
      function clearData() {
        localStorage.removeItem("isLoggedIn");
        localStorage.removeItem("userInfo");
        refreshData();
        alert("Data cleared!");
      }

      // Initialize
      document.addEventListener("DOMContentLoaded", function () {
        loadJSONData();
        refreshData();
      });
    </script>
    <script src="scripts.js"></script>
    <script src="login.js"></script>
  </body>
</html>
